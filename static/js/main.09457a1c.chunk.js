(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){e.exports=n(283)},228:function(e,t){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var r,a,i=n(0),o=n.n(i),s=n(44),d=n.n(s),c=n(13),l=n(14),p=n(16),u=n(10),f=n(15),h=n(9),m=n(114),g=n(11),b=n(17),y=n(5),v=n(4),O=n.n(v),x=n(284),E=Object(x.a)((r={},Object(g.a)(r,"ADDRESS_LIST_FETCH",function(e){return Object(y.a)({},e,{isFetching:!0,list:[]})}),Object(g.a)(r,"ADDRESS_LIST_FETCH_SUCCESS",function(e,t){return Object(y.a)({},e,{list:Object(b.a)(t.addressList),isFetching:!1})}),Object(g.a)(r,"ADDRESS_LIST_FETCH_FAIL",function(e){return Object(y.a)({},e,{isFetching:!1})}),r),{list:[],isFetching:!1}),j=(O.a.string,O.a.string,O.a.string,O.a.string,E),w=n(125),I=function(){return(new Date).getUTCMilliseconds()},C=function(e){return e.toArray().map(function(e){var t=e.geometry.getCoordinates().map(function(e){return e.toString()}),n=Object(w.a)(t,2),r=n[0];return{lat:n[1],lng:r,name:e.properties.get("name"),description:e.properties.get("text")}})},A=n(30),_=n.n(A),k=Object(x.a)((a={},Object(g.a)(a,"POINT_ADD",function(e,t){var n=_()(e),r=n.byId,a=t.id;return Object.values(r).filter(function(e){return e.lat===t.address.lat&&e.lng===t.address.lng}).length?Object(y.a)({},n):Object(y.a)({},n,{byId:Object(y.a)({},n.byId,Object(g.a)({},a,Object(y.a)({},t.address,{id:a}))),ids:[].concat(Object(b.a)(n.ids),[a])})}),Object(g.a)(a,"POINT_REMOVE",function(e,t){var n=_()(e),r=n.byId,a=n.ids,i=t.id;return a.splice(a.indexOf(i),1),delete r[i],Object(y.a)({},n,{byId:Object(y.a)({},r),ids:Object(b.a)(a)})}),Object(g.a)(a,"POINT_ORDER_CHANGE",function(e,t){var n=_()(e),r=t.oldIndex,a=t.newIndex,i=function(e,t,n){if(t>e.length-1||n>e.length-1)return console.log("Position exceeds array length"),e;var r=Object(b.a)(e),a=r.splice(t,1),i=r.slice(0,n),o=r.slice(n);return[].concat(Object(b.a)(i),Object(b.a)(a),Object(b.a)(o))}(n.ids,r,a);return Object(y.a)({},n,{ids:i})}),Object(g.a)(a,"POINT_POSITION_CHANGE",function(e,t){var n=_()(e),r=t.coordinates,a=t.id,i=n.byId;return i[a].lng=r[0].toString(),i[a].lat=r[1].toString(),Object(y.a)({},n,{byId:Object(y.a)({},i)})}),a),{byId:{},ids:[]}),P=(O.a.number,O.a.string,O.a.string,O.a.string,O.a.string,k),S=Object(h.combineReducers)({addresses:j,points:P}),N=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}}("map-routes"),L=Object(m.composeWithDevTools)({}),D=Object(h.createStore)(S,N,L());D.subscribe(function(){!function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(r){}}("map-routes",D.getState())});var R=D,T=n(7),F=n(19),M={center:[55.75,37.57],zoom:9,controls:[],points:{}},B=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state=Object(y.a)({},M,{orderedPoints:[],ids:[]}),n.onDragEnd=function(e,t){(0,n.props.updatePointPosition)(e.originalEvent.target.geometry._coordinates,t)},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"getPolylineGeometry",value:function(){return this.state.orderedPoints.map(function(e){return[e.lng,e.lat]})}},{key:"renderPlacemark",value:function(e,t){var n=this,r={geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]},properties:{iconContent:t+1,hintContent:e.name,balloonContentHeader:e.name,balloonContentBody:e.description},options:{preset:"twirl#redDotIcon",draggable:!0,hintHideTimeout:0},modules:["geoObject.addon.balloon","geoObject.addon.hint"]};return o.a.createElement(F.b,Object.assign({key:e.id,onDragEnd:function(t){return n.onDragEnd(t,e.id)}},r))}},{key:"render",value:function(){var e=this,t=this.props.onMapLoad,n=this.state.orderedPoints;return o.a.createElement(F.a,{state:this.state,defaultState:this.state,width:"100%",height:"100%",onLoad:t,onError:function(e){return console.log(e)}},n.map(function(t,n){return e.renderPlacemark(t,n)}),o.a.createElement(F.c,{geometry:this.getPolylineGeometry(n)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.ids,r=e.pointsById,a=[];n.forEach(function(e){a.push(r[e])});var i,o={orderedPoints:a,ids:n};return i=t.ids,e.ids.length>i.length&&(o.center=function(e){var t=e[e.length-1];return[t.lng,t.lat]}(a)),o}}]),t}(o.a.Component);B.defaultProps={pointsById:{},ids:[]};var H={updatePointPosition:function(e,t){return{type:"POINT_POSITION_CHANGE",coordinates:e,id:t}}},V=Object(T.b)(function(e){return{pointsById:e.points.byId,ids:e.points.ids}},H)(B),z=n(65),G=n.n(z),W=n(116),K=n(117),q=n.n(K),J=n(118),U=n.n(J);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var X=o.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",strokeWidth:2},o.a.createElement("circle",{cx:22,cy:22,r:6.38895,strokeOpacity:0},o.a.createElement("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),o.a.createElement("circle",{cx:22,cy:22,r:14.389,strokeOpacity:0},o.a.createElement("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),o.a.createElement("circle",{cx:22,cy:22,r:4.54142},o.a.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"}))),Y=function(e){var t=e.svgRef,n=Q(e,["svgRef"]);return o.a.createElement("svg",$({width:45,height:45,viewBox:"0 0 45 45",stroke:"#000",ref:t},n),X)},Z=o.a.forwardRef(function(e,t){return o.a.createElement(Y,$({svgRef:t},e))}),ee=(n.p,n(2)),te=ee.a.i.withConfig({displayName:"Spinnerstyled__SpinnerIcon",componentId:"sc-170awyp-0"})(["display:block;width:",";height:",";svg{stroke:",";width:100%;height:100%;}"],function(e){return e.large?"100px":"20px"},function(e){return e.large?"100px":"20px"},function(e){return e.color}),ne=function(e){var t=e.large,n=e.color;return o.a.createElement(te,{large:t,color:n,alt:"spinner"},o.a.createElement(Z,null))};ne.defaultProps={large:!1,color:"dodgerblue"};var re=ne,ae=ee.a.div.withConfig({displayName:"AddressInputstyled__AddressInputBlock",componentId:"sc-10sj4ff-0"})(["background-color:#fff;border-radius:8px;padding:5px 10px;border:1px solid #e4e4e4;width:392px;display:flex;flex-direction:row;z-index:3;position:relative;box-shadow:none;transition:ease 0.3s box-shadow;align-items:center;@media screen and (max-width:448px){width:100%;border-radius:0;}> div{flex-grow:1;}"]),ie=ee.a.input.withConfig({displayName:"AddressInputstyled__Input",componentId:"sc-10sj4ff-1"})(["font-size:16px;font-family:'Roboto Slab',serif;border-radius:3px;border:none;height:24px;outline:none;width:100%;box-sizing:border-box;"]),oe=ee.a.span.withConfig({displayName:"AddressInputstyled__EnterButtonIcon",componentId:"sc-10sj4ff-2"})(["position:relative;display:block;border-radius:3px;border:1px solid #ccc;background-color:#fefefe;width:25px;height:20px;&:before,&:after{content:'';position:absolute;}&:before{border-top:3px solid transparent;border-bottom:3px solid transparent;border-right:3px solid #555;left:6px;top:9px;position:absolute;}&:after{width:8px;height:8px;border-right:1px solid #555;border-bottom:1px solid #555;top:4px;left:9px;border-bottom-right-radius:2px;}"]),se=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).fetchAddressList=function(){var e=Object(W.a)(G.a.mark(function e(t){var r,a,i,o,s,d;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.fetchAddressList,i=r.fetchAddressListSuccess,o=n.props.ymaps.geocode,a(),e.next=5,o(t);case 5:s=e.sent,d=C(s.geoObjects),i(d);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleInputChange=function(e){e.persist();var t=e.target.value;n.debouncedFetchAddressList(t)},n.debouncedFetchAddressList=q()(n.fetchAddressList,500),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClickOutside,n=e.onKeyDown,r=e.isAddressFetching,a=e.isAddressListVisible,i=!r&&a;return o.a.createElement(ae,null,o.a.createElement(U.a,{onOutsideClick:t},o.a.createElement(ie,{"data-e2e-id":"address-input",type:"text",placeholder:"Search...",onChange:this.handleInputChange,onKeyDown:n})),r&&o.a.createElement(re,null),i&&o.a.createElement(oe,null))}}]),t}(i.Component),de=Object(F.e)(se),ce=n(124),le=function(){return"\n  border-radius: 3px;\n  border: none;\n  height: 24px;\n  width: 24px;\n  outline: none;\n  transition: ease .3s background-color;\n  background-color: #fff;\n  padding: 0;\n\n  &:hover {\n    background-color: ".concat(Object(ce.a)(.05,"#fff"),";\n    cursor: pointer;\n  }\n")},pe=ee.a.li.withConfig({displayName:"AddressItemstyled__AddressItemBlock",componentId:"tr8q9s-0"})(["display:flex;padding:4px;"]),ue=ee.a.span.withConfig({displayName:"AddressItemstyled__ItemName",componentId:"tr8q9s-1"})(["flex-grow:2;cursor:default;padding-left:5px;"]),fe=ee.a.button.withConfig({displayName:"AddressItemstyled__AddButton",componentId:"tr8q9s-2"})(["",""],le),he=function(e){var t=e.address,n=e.handleAddClick;return o.a.createElement(pe,{"data-e2e-id":"address-item"},o.a.createElement(ue,null,t.name),o.a.createElement(fe,{onClick:function(){return n(t,I())}},o.a.createElement("i",{className:"icofont-plus"})))};he.defaultProps={address:{}};var me=he,ge=ee.a.ul.withConfig({displayName:"AddressListstyled__AddressListContainer",componentId:"sc-1uom5j3-0"})(["margin:0 10px;background-color:#fff;border-bottom-left-radius:4px;border-bottom-right-radius:4px;border:1px solid #e4e4e4;position:relative;padding-top:10px;top:-10px;z-index:2;max-height:300px;overflow:auto;display:",";"],function(e){return e.isVisible?"block":"none"}),be=Object(T.b)(function(e){return{addresses:e.addresses.list}},null)(function(e){var t=e.addresses,n=e.isVisible,r=e.addPoint;return o.a.createElement(ge,{isVisible:n},t.map(function(e,t){return o.a.createElement(me,{address:e,key:"address-".concat(t),handleAddClick:r})}))}),ye=ee.a.div.withConfig({displayName:"Addressstyled__AddressBlock",componentId:"sc-7m87v5-0"})(["z-index:2;position:fixed;top:20px;left:20px;@media screen and (max-width:448px){top:0;left:0;width:100%;}"]),ve=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={isAddressListVisible:!1},n.onClickOutside=function(){n.hideAddressList()},n.handleAddressInputKeyDown=function(e){var t=n.props,r=t.addresses,a=t.addPoint;r.length&&13===e.keyCode&&(a(r[0],I()),n.hideAddressList())},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.addresses.length&&!e.addresses.length&&this.showAddressList()}},{key:"showAddressList",value:function(){this.setState({isAddressListVisible:!0})}},{key:"hideAddressList",value:function(){this.setState({isAddressListVisible:!1})}},{key:"render",value:function(){var e=this.onClickOutside,t=this.handleAddressInputKeyDown,n=this.props,r=n.fetchAddressList,a=n.fetchAddressListSuccess,i=n.addPoint,s=n.addresses,d=n.isAddressFetching,c=this.state.isAddressListVisible;return o.a.createElement(ye,null,o.a.createElement(de,{fetchAddressList:r,fetchAddressListSuccess:a,onClickOutside:e,isAddressFetching:d,onKeyDown:t,isAddressListVisible:c}),o.a.createElement(be,{addresses:s,isVisible:c,addPoint:i}))}}]),t}(i.Component),Oe={fetchAddressList:function(){return{type:"ADDRESS_LIST_FETCH"}},fetchAddressListSuccess:function(e){return{type:"ADDRESS_LIST_FETCH_SUCCESS",addressList:e}},addPoint:function(e,t){return{type:"POINT_ADD",address:e,id:t}}},xe=Object(T.b)(function(e){return{addresses:e.addresses.list,isAddressFetching:e.addresses.isFetching}},Oe)(ve),Ee=n(48),je=ee.a.div.withConfig({displayName:"Pointstyled__PointContainer",componentId:"sc-1geppr7-0"})(["padding:5px;display:flex;flex-direction:row;align-items:center;margin-bottom:4px;position:relative;"]),we=ee.a.div.withConfig({displayName:"Pointstyled__DragHandle",componentId:"sc-1geppr7-1"})(["position:relative;top:1px;"]),Ie=ee.a.span.withConfig({displayName:"Pointstyled__PointName",componentId:"sc-1geppr7-2"})(["flex-grow:2;padding:5px;cursor:default;"]),Ce=ee.a.button.withConfig({displayName:"Pointstyled__RemoveButton",componentId:"sc-1geppr7-3"})(["",";"],le),Ae=ee.a.i.withConfig({displayName:"Pointstyled__ButtonIcon",componentId:"sc-1geppr7-4"})(["font-size:15px;"]),_e=function(e){var t=e.point,n=e.onPointRemove,r=e.provided;return o.a.createElement(je,null,o.a.createElement(we,r.dragHandleProps,o.a.createElement("i",{className:"icofont-navigation-menu"})),o.a.createElement(Ie,null,t.name),o.a.createElement(Ce,{onClick:function(){return n(t.id)}},o.a.createElement(Ae,{className:"icofont-bin"})))};_e.defaultProps={point:{}};var ke=_e,Pe=ee.a.div.withConfig({displayName:"PointsListstyled__PointsListContainer",componentId:"sc-1b49gx2-0"})(["min-height:30px;max-height:400px;background-color:#fff;border-radius:8px;border:1px solid #e4e4e4;z-index:1;min-width:200px;padding-right:5px;@media screen and (max-width:448px){width:100%;padding-right:0;max-height:250px;overflow:auto;}"]),Se=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).onDragEnd=function(e){"DROP"===e.reason&&(0,n.props.changePointOrder)({oldIndex:e.source.index,newIndex:e.destination.index,addressId:e.draggableId})},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.onDragEnd,t=this.props,n=t.pointsById,r=t.ids,a=t.removePoint;return r.length?o.a.createElement(Ee.a,{onDragEnd:e},o.a.createElement(Ee.c,{droppableId:"points-droppable"},function(e){return o.a.createElement(Pe,Object.assign({ref:e.innerRef},e.droppableProps),r.map(function(e,t){return o.a.createElement(Ee.b,{key:e,draggableId:e,index:t},function(t){return o.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps),o.a.createElement(ke,{point:n[e],onPointRemove:a,provided:t}))})}),e.placeholder)})):null}}]),t}(i.Component),Ne={removePoint:function(e){return{type:"POINT_REMOVE",id:e}},changePointOrder:function(e){return Object(y.a)({type:"POINT_ORDER_CHANGE"},e)}},Le=Object(T.b)(function(e){return{ids:e.points.ids,pointsById:e.points.byId}},Ne)(Se),De=ee.a.div.withConfig({displayName:"Appstyled__Wrapper",componentId:"sc-1o46p4-0"})(["height:100vh;"]),Re=ee.a.div.withConfig({displayName:"Appstyled__PointsListWrapper",componentId:"sc-1o46p4-1"})(["position:fixed;z-index:1;left:0;top:0;height:100vh;display:flex;align-items:center;padding-left:20px;width:0;@media screen and (max-width:448px){top:auto;bottom:0;height:auto;display:block;width:100%;padding-left:0;}"]),Te=ee.a.div.withConfig({displayName:"Appstyled__LoadingOverlay",componentId:"sc-1o46p4-2"})(["position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background-color:#fff;z-index:5;"]),Fe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={isMapLoaded:!1},n.handleMapLoad=function(){n.setState({isMapLoaded:!0})},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.isMapLoaded;return o.a.createElement(o.a.Fragment,null,!e&&o.a.createElement(Te,null,o.a.createElement(re,{large:!0})),o.a.createElement(T.a,{store:R},o.a.createElement(F.d,{query:{ns:"use-load-option",apikey:"7547cd62-6ddd-4fe8-bbef-55ea5c7e70bf",load:"geocode"}},o.a.createElement(De,null,o.a.createElement(V,{onMapLoad:this.handleMapLoad}),e&&o.a.createElement(xe,null),o.a.createElement(Re,null,o.a.createElement(Le,null))))))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(279),n(280),n(281),n(282);d.a.render(o.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[129,1,2]]]);
//# sourceMappingURL=main.09457a1c.chunk.js.map